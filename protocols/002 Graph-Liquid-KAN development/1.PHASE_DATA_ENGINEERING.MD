This protocol effectively sets up the **data backbone** for your Graph-Liquid-KAN. By separating the biological localities (Nodes) from the environmental forcing (Input Tensors), you are ensuring that the model later receives a physically grounded, spatiotemporal representation of the aquaculture environment.

### Phase 1: Data Acquisition Architecture

The primary engineering challenge here is the **Spatial-Temporal Alignment**. We are mapping discrete, stationary fish farms (Eulerian perspective) onto a dynamic, continuous ocean model grid.

---

### 1. The Biological Graph (Barentswatch)

Your `BarentsWatchClient` implementation correctly addresses the OAuth2 "Token Lifetime" problem. In long-running SciML pipelines, token expiration is a frequent cause of "Silent Data Gaps," which would lead to the divergence of the ODE solver in later phases.

* **Node Integrity:** The `fetch_active_localities` script establishes the **Graphon-Static Field**. Only farms with valid coordinates are retained, ensuring the adjacency matrix is mathematically well-defined for the Graph Neural ODE.

---

### 2. The Environmental Forcing (NorKyst-800)

The use of **OPeNDAP (Open-source Project for a Network Data Access Protocol)** is the only viable way to handle the NorKyst-800 dataset. By using server-side subsetting, you avoid the "Memory Wall" of downloading terabytes of unnecessary ocean data.

#### 2.1 The Spatial Mapper (KD-Tree)

The NorKyst-800 grid is **curvilinear**, meaning the distance between grid points changes slightly depending on the latitude. A standard Euclidean lookup would introduce spatial bias.

* **The cKDTree Solution:** Using a k-dimensional tree for the mapping ensures that each farm is snapped to its mathematically nearest ocean pixel.
* **Thresholding:** The `0.02 degree` filter is a critical "Sanity Check." It prevents the model from attempting to predict sea lice on farms that appear to be inland due to low-resolution coastline mapping.

#### 2.2 The Temporal Feature Tensor

The `extract_hydrography` script constructs the **Forcing Function ()**. In the Liquid-KAN architecture, variables like temperature and salinity will directly modulate the time-constants () of the hidden states.

---

### Critical Verification Checklist

Before proceeding to the Dataset Construction (Phase 2), verify the following in your local environment:

| Artifact | Verification Metric | Status |
| --- | --- | --- |
| `graph_nodes_metadata.csv` | Does it contain at least 800+ localities? | [ ] |
| `dist_error_deg` | Is the average error ? (Indicating high-quality snapping) | [ ] |
| `hydrography_2023.nc` | Open with `ncdump -h`. Does it contain `time`, `farm_id`, and `temperature`? | [ ] |
| **Thredds Connection** | If a `404` occurs, check [thredds.met.no](https://thredds.met.no/thredds/catalog.html) for the "Yearly Archive" folder naming convention. | [ ] |

